<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>蟹老板软件屋</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; }
        body {
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            background: #0a0a0f;
            color: #ffffff;
            overflow-x: hidden;
        }

        /* ===== 开场 Loading 粒子动画样式 ===== */
        #loadingScreen{
            position: fixed; inset: 0;
            background: #000;
            z-index: 99999;
            display: flex; align-items: center; justify-content: center;
            overflow: hidden; flex-direction: column;
        }
        #loadingCanvas{ position:absolute; inset:0; width:100%; height:100%; }
        .loadingText{
            position: relative; z-index:2;
            font-size: 2rem; font-weight: 700; letter-spacing: 2px;
            color: #00f2fe; user-select: none;
            animation: glow 2s infinite;
        }
        @keyframes glow {
            0%,100% { text-shadow: 0 0 6px #00f2fe, 0 0 14px #00f2fe, 0 0 22px #00f2fe; }
            50%     { text-shadow: 0 0 16px #4facfe, 0 0 32px #4facfe, 0 0 56px #4facfe; }
        }
        .fadeOut { animation: fadeOutAnim 1s forwards; }
        @keyframes fadeOutAnim { to { opacity: 0; visibility: hidden; } }

        /* 背景渐变动画 */
        .bg-animation{
            position: fixed; top:0; left:0; width:100%; height:100%;
            z-index:-1;
            background: linear-gradient(45deg, #0a0a0f, #1a1a2e, #16213e);
            animation: gradientShift 15s ease infinite;
        }
        @keyframes gradientShift {
            0%,100% { background: linear-gradient(45deg, #0a0a0f, #1a1a2e, #16213e); }
            50%     { background: linear-gradient(45deg, #16213e, #0a0a0f, #1a1a2e); }
        }

        /* 顶部导航 */
        nav{
            position: fixed; top:0; width:100%;
            padding: 20px 50px;
            background: rgba(10,10,15,0.9);
            backdrop-filter: blur(10px);
            z-index: 1000; transition: all .3s ease;
        }
        .nav-container{ display:flex; justify-content:space-between; align-items:center; max-width:1200px; margin:0 auto; }
        .logo{ font-size:24px; font-weight:bold; cursor:pointer; display:flex; align-items:center; }
        #logoIcon{ height:30px; margin-right:10px; display:none; }
        #logoText{ background: linear-gradient(45deg, #4facfe, #00f2fe); -webkit-background-clip:text; -webkit-text-fill-color: transparent; }
        .nav-links{ display:flex; list-style:none; gap:30px; }
        .nav-links a{ color:#fff; text-decoration:none; position:relative; transition:.3s; }
        .nav-links a:hover{ color:#4facfe; }
        .nav-links a::after{
            content:''; position:absolute; bottom:-5px; left:0; width:0; height:2px;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            transition: width .3s ease;
        }
        .nav-links a:hover::after{ width:100%; }

        .admin-btn{
            padding:10px 20px; border:none; border-radius:25px; color:#fff; cursor:pointer;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            transition: all .3s ease;
        }
        .admin-btn:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79,172,254,0.3); }

        /* 通知条 */
        .notification-bar{
            position: fixed; top:80px; width:100%; height:50px;
            background: linear-gradient(45deg, rgba(79,172,254,.2), rgba(0,242,254,.2));
            border-top: 1px solid rgba(79,172,254,.3);
            border-bottom: 1px solid rgba(79,172,254,.3);
            overflow: hidden; z-index: 999; display:flex; align-items:center;
        }
        .notification-content-wrapper{
            display:inline-block; white-space:nowrap;
            animation: scrollLeft 20s linear infinite;
        }
        .notification-content-wrapper.scroll-right{ animation-name: scrollRight; }
        @keyframes scrollLeft { 0% { transform: translateX(100vw);} 100% { transform: translateX(-100%);} }
        @keyframes scrollRight{ 0% { transform: translateX(-100%);} 100% { transform: translateX(100vw);} }

        /* 主体 */
        .main-content{ padding-top:150px; min-height:100vh; }
        .hero-section{ text-align:center; padding:100px 50px; max-width:1200px; margin:0 auto; }
        .hero-title{
            font-size:4rem; margin-bottom:20px;
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            -webkit-background-clip:text; -webkit-text-fill-color: transparent;
            animation: slideInUp 1s ease;
        }
        .hero-subtitle{ font-size:1.5rem; margin-bottom:40px; opacity:.8; animation: slideInUp 1s ease .2s both; }
        @keyframes slideInUp { from{ opacity:0; transform: translateY(50px);} to{ opacity:1; transform: translateY(0);} }

        .software-grid{
            display:grid; grid-template-columns: repeat(auto-fit, minmax(350px,1fr));
            gap:30px; padding:50px; max-width:1200px; margin:0 auto;
        }
        .software-card{
            background: rgba(255,255,255,.05);
            border: 1px solid rgba(79,172,254,.3);
            border-radius: 15px; padding:30px;
            transition: all .3s ease; backdrop-filter: blur(10px);
            display:flex; flex-direction:column;
        }
        .software-card:hover{
            transform: translateY(-10px);
            border-color: rgba(79,172,254,.8);
            box-shadow: 0 20px 40px rgba(79,172,254,.2);
        }
        .software-image-container{ width:100%; height:200px; border-radius:10px; margin-bottom:20px; background: rgba(0,0,0,.2); overflow:hidden; }
        .software-image{ width:100%; height:100%; object-fit:cover; transition: transform .3s ease; }
        .software-card:hover .software-image{ transform: scale(1.05); }
        .software-title{ font-size:1.5rem; margin-bottom:10px; color:#4facfe; }
        .software-description{ opacity:.8; line-height:1.6; margin-bottom:20px; flex-grow:1; }
        .software-version{ font-size:.9rem; color:#00f2fe; margin-bottom:15px; }
        .download-btn{
            padding:12px 25px; border:none; border-radius:25px; color:#fff; cursor:pointer; width:100%; margin-top:auto;
            background: linear-gradient(45deg, #4facfe, #00f2fe); transition: all .3s ease;
        }
        .download-btn:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79,172,254,.3); }

        /* 后台 */
        .admin-panel{ display:none; padding:50px; max-width:1200px; margin:0 auto; }
        .admin-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:40px; flex-wrap:wrap; }
        .admin-title{
            font-size:2.5rem;
            background: linear-gradient(45deg, #4facfe, #00f2fe); -webkit-background-clip:text; -webkit-text-fill-color: transparent;
        }
        .add-software-btn{
            padding:15px 30px; border:none; border-radius:25px; color:#fff; cursor:pointer; font-size:1rem; margin-top:10px;
            background: linear-gradient(45deg, #4facfe, #00f2fe); transition: all .3s ease;
        }
        .add-software-btn:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79,172,254,.3); }

        .admin-table{
            background: rgba(255,255,255,.05); border-radius:15px; padding:30px;
            backdrop-filter: blur(10px); border:1px solid rgba(79,172,254,.3); overflow-x:auto;
        }
        table{ width:100%; border-collapse:collapse; }
        th, td{ padding:15px; text-align:left; border-bottom:1px solid rgba(79,172,254,.2); vertical-align:middle; white-space:nowrap; }
        th{ background: rgba(79,172,254,.1); color:#4facfe; font-weight:bold; }
        .admin-table-image{ width:100px; height:60px; object-fit:cover; border-radius:5px; }
        .action-btn{ padding:8px 15px; border:none; border-radius:20px; cursor:pointer; margin:0 5px; transition:.3s; }
        .edit-btn{ background: linear-gradient(45deg, #4facfe, #00f2fe); color:#fff; }
        .delete-btn{ background: linear-gradient(45deg, #ff416c, #ff4b2b); color:#fff; }
        .action-btn:hover{ transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,.3); }
        .order-btn{ background: rgba(255,255,255,.1); border:1px solid rgba(79,172,254,.3); color:#fff; width:30px; height:30px; border-radius:50%; padding:0; margin:0 2px; }
        .order-btn:disabled{ opacity:.3; cursor:not-allowed; }

        /* 弹窗 */
        .modal{ display:none; position:fixed; z-index:2000; left:0; top:0; width:100%; height:100%; background: rgba(0,0,0,.8); backdrop-filter: blur(5px); overflow-y:auto; }
        .modal-content{
            background: rgba(26,26,46,.95);
            margin:5% auto; padding:40px; border:1px solid rgba(79,172,254,.3); border-radius:15px;
            width:90%; max-width:600px; backdrop-filter: blur(10px);
        }
        .modal-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:30px; }
        .modal-title{ font-size:1.8rem; color:#4facfe; }
        .close{ color:#aaa; font-size:28px; font-weight:bold; cursor:pointer; transition:.3s; }
        .close:hover{ color:#4facfe; }
        .form-group{ margin-bottom:20px; }
        .form-group label{ display:block; margin-bottom:8px; color:#4facfe; font-weight:bold; }
        .form-group input, .form-group textarea, .form-group select{
            width:100%; padding:12px; border:1px solid rgba(79,172,254,.3); border-radius:8px; background: rgba(255,255,255,.05); color:#fff; font-size:1rem; transition:.3s;
        }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus{
            outline:none; border-color:#4facfe; box-shadow: 0 0 10px rgba(79,172,254,.3);
        }
        .form-group textarea{ height:100px; resize:vertical; }
        .image-preview-area{ margin-top:10px; }
        .image-preview{ max-width:100%; height:auto; max-height:100px; border-radius:8px; border:1px solid rgba(79,172,254,.3); }
        .form-actions{ display:flex; justify-content:flex-end; gap:15px; margin-top:30px;}
        .cancel-btn, .save-btn{ padding:12px 25px; border-radius:25px; cursor:pointer; transition:.3s; }
        .cancel-btn{ background: rgba(255,255,255,.1); border:1px solid rgba(79,172,254,.3); color:#fff; }
        .cancel-btn:hover{ background: rgba(255,255,255,.2); }
        .save-btn{ background: linear-gradient(45deg, #4facfe, #00f2fe); border:none; color:#fff; }
        .save-btn:hover{ transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79,172,254,.3); }

        .about-us-content{ max-height:60vh; overflow-y:auto; line-height:1.8; color:#ccc; padding-right:15px; }
        .about-us-content h3{ color:#4facfe; margin-top:25px; margin-bottom:10px; border-left:4px solid #00f2fe; padding-left:10px; }
        .about-us-content p{ margin-bottom:15px; text-indent:2em; }

        .contact-content { text-align:center; padding:20px; color:#fff; line-height:1.6; }
        .contact-content img{ display:block; margin:20px auto 0; max-width:100%; height:auto; max-height:300px; border-radius:10px; border:1px solid rgba(79,172,254,.3); }
        .contact-text{ white-space: pre-wrap; text-align:center; }

        /* ===== 科技感鼠标（霓虹指环 + 粒子尾迹 + 连线） ===== */
        body.mousefx-enabled { cursor: none; } /* 桌面端隐藏系统指针 */
        #cursorCanvas{
            position: fixed; inset: 0;
            z-index: 9999; /* 高于页面元素，低于 loadingScreen(99999) */
            pointer-events: none;
        }

        /* ====== 底部访客计数（新增） ====== */
        .site-footer{
            margin-top: 40px;
            padding: 24px 16px 32px;
            background: rgba(255,255,255,0.03);
            border-top: 1px solid rgba(79,172,254,0.25);
        }
        .footer-inner{
            max-width:1200px; margin:0 auto;
            display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between;
            gap:12px;
        }
        .counter-badge{
            display:inline-flex; align-items:center; gap:10px;
            padding:10px 14px; border-radius:12px;
            background: linear-gradient(45deg, rgba(79,172,254,.12), rgba(0,242,254,.12));
            border:1px solid rgba(79,172,254,.35);
            box-shadow: 0 10px 24px rgba(79,172,254,.08);
        }
        .counter-dot{
            width:10px; height:10px; border-radius:50%;
            background: radial-gradient(circle at 40% 40%, #00f2fe, #4facfe);
            box-shadow: 0 0 10px rgba(0,242,254,.8);
        }
        .counter-text{
            font-weight:600; color:#cfefff; letter-spacing:.5px;
        }
        .counter-number{
            font-variant-numeric: tabular-nums;
            font-weight:800; font-size:1.1rem; color:#00f2fe;
            text-shadow: 0 0 8px rgba(0,242,254,.35);
        }
        .footer-tip{ opacity:.7; font-size:.95rem; }
        /* 移动端对齐 */
        @media (max-width:640px){
            .footer-inner{ justify-content:center; text-align:center; }
        }
        /* 移动端默认无鼠标，恢复系统指针逻辑在脚本中处理 */
    </style>
</head>
<body class="mousefx-enabled">
    <!-- 开场 Loading 覆盖层 -->
    <div id="loadingScreen" aria-hidden="true">
        <canvas id="loadingCanvas"></canvas>
        <div class="loadingText">Loading...</div>
    </div>

    <div class="bg-animation"></div>

    <!-- 全站鼠标粒子画布 -->
    <canvas id="cursorCanvas" aria-hidden="true"></canvas>

    <nav>
        <div class="nav-container">
            <div class="logo" onclick="showHome()">
                <img id="logoIcon" src="" alt="Logo Icon">
                <span id="logoText"></span>
            </div>
            <ul class="nav-links">
                <li><a href="#" onclick="showHome()">首页</a></li>
                <li><a href="#" onclick="scrollToSoftware()">软件展示</a></li>
                <li><a href="#" onclick="showAbout()">蟹老板的传说</a></li>
                <li><a href="#" onclick="showContact()">联系方式</a></li>
            </ul>
            <button class="admin-btn" onclick="showAdmin()">管理后台</button>
        </div>
    </nav>

    <div class="notification-bar">
        <div class="notification-content-wrapper">
            <span id="notificationContent"></span>
        </div>
    </div>

    <div class="main-content">
        <div id="home-content">
            <div class="hero-section">
                <h1 class="hero-title">创新软件解决方案</h1>
                <p class="hero-subtitle">探索未来科技，体验极致创新</p>
            </div>
            <div id="software-showcase" class="software-grid"></div>
        </div>

        <div id="admin-content" class="admin-panel">
            <div class="admin-header">
                <h2 class="admin-title">软件管理后台</h2>
                <div>
                    <button class="add-software-btn" onclick="showContactSettingsModal()" style="margin-right:15px;">联系设置</button>
                    <button class="add-software-btn" onclick="showLogoSettingsModal()" style="margin-right:15px;">Logo设置</button>
                    <button class="add-software-btn" onclick="showNotificationModal()" style="margin-right:15px;">通知设置</button>
                    <button class="add-software-btn" onclick="showAddModal()" style="margin-right:15px;">添加新软件</button>
                    <button class="add-software-btn" onclick="logout()" style="background:linear-gradient(45deg,#ff416c,#ff4b2b);">退出登录</button>
                </div>
            </div>
            <div class="admin-table">
                <table>
                    <thead>
                        <tr>
                            <th>软件截图</th>
                            <th>软件名称</th>
                            <th>版本</th>
                            <th>描述</th>
                            <th>排序</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="admin-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 各类弹窗 -->
    <div id="softwareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle"></h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div>
                <div class="form-group">
                    <label for="softwareName">软件名称</label>
                    <input type="text" id="softwareName">
                </div>
                <div class="form-group">
                    <label for="softwareVersion">版本号</label>
                    <input type="text" id="softwareVersion">
                </div>
                <div class="form-group">
                    <label for="softwareDescription">软件描述</label>
                    <textarea id="softwareDescription"></textarea>
                </div>
                <div class="form-group">
                    <label for="imagePath">软件截图文件名</label>
                    <input type="text" id="imagePath" placeholder="例如: screenshot.png">
                    <div class="image-preview-area">
                        <img id="imagePathPreview" class="image-preview" src="" style="display:none;" alt="预览">
                    </div>
                </div>
                <div class="form-group">
                    <label for="downloadUrl">下载链接</label>
                    <input type="url" id="downloadUrl" placeholder="https://example.com/download">
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeModal()">取消</button>
                    <button type="button" class="save-btn" onclick="saveSoftware()">保存</button>
                </div>
            </div>
        </div>
    </div>

    <div id="logoSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Logo 设置</h3>
                <span class="close" onclick="closeLogoSettingsModal()">&times;</span>
            </div>
            <div>
                <div class="form-group">
                    <label for="logoTextInput">Logo 文字</label>
                    <input type="text" id="logoTextInput">
                </div>
                <div class="form-group">
                    <label for="logoPathInput">Logo 图标文件名 (可选)</label>
                    <input type="text" id="logoPathInput" placeholder="例如: logo.png">
                    <div class="image-preview-area">
                        <img id="logoPathPreview" class="image-preview" src="" style="display:none;" alt="预览">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeLogoSettingsModal()">取消</button>
                    <button type="button" class="save-btn" onclick="saveLogoSettings()">保存设置</button>
                </div>
            </div>
        </div>
    </div>

    <div id="notificationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">通知栏设置</h3>
                <span class="close" onclick="closeNotificationModal()">&times;</span>
            </div>
            <div>
                <div class="form-group">
                    <label for="notificationText">通知内容</label>
                    <textarea id="notificationText"></textarea>
                </div>
                <div class="form-group">
                    <label for="scrollDirection">滚动方向</label>
                    <select id="scrollDirection">
                        <option value="left">从右向左</option>
                        <option value="right">从左向右</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="scrollSpeed">滚动速度</label>
                    <select id="scrollSpeed">
                        <option value="slow">慢速 (30秒)</option>
                        <option value="normal" selected>正常 (20秒)</option>
                        <option value="fast">快速 (10秒)</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeNotificationModal()">取消</button>
                    <button type="button" class="save-btn" onclick="saveNotificationSettings()">保存设置</button>
                </div>
            </div>
        </div>
    </div>

    <div id="contactSettingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">联系方式设置</h3>
                <span class="close" onclick="closeContactSettingsModal()">&times;</span>
            </div>
            <div>
                <div class="form-group">
                    <label for="contactText">联系方式文字</label>
                    <textarea id="contactText" rows="5"></textarea>
                </div>
                <div class="form-group">
                    <label for="contactQRCodePath">二维码图片文件名</label>
                    <input type="text" id="contactQRCodePath" placeholder="例如: qrcode.png">
                    <div class="image-preview-area">
                        <img id="contactQRCodePreview" class="image-preview" src="" style="display:none;" alt="预览">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeContactSettingsModal()">取消</button>
                    <button type="button" class="save-btn" onclick="saveContactSettings()">保存设置</button>
                </div>
            </div>
        </div>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">管理员登录</h3>
                <span class="close" onclick="closeLoginModal()">&times;</span>
            </div>
            <div>
                <div class="form-group">
                    <label for="username">用户名</label>
                    <input type="text" id="username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="password">密码</label>
                    <input type="password" id="password" placeholder="请输入密码">
                </div>
                <div class="form-actions" style="margin-top:40px;">
                    <button type="button" class="cancel-btn" onclick="closeLoginModal()">取消</button>
                    <button type="button" class="save-btn" onclick="performLogin()">登录</button>
                </div>
            </div>
        </div>
    </div>

    <div id="aboutUsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">蟹老板的传说 - 蟹老板外传</h3>
                <span class="close" onclick="closeAboutUsModal()">&times;</span>
            </div>
            <div class="about-us-content">
                <h3>第一章 壳里的第一页</h3><p>在招投标的江湖里，一直流传着一个名字——蟹老板。传说他并非凡人，而是一只从远古合同之海里爬上岸的寄居蟹，壳里藏着的是一部用贝壳镌刻的《标书真经》。</p><p>蟹老板初到人间时，不过是一只指甲盖大的小蟹，被海浪拍在滨海市招标办的台阶上。那天，一份价值十亿的跨海大桥 PPP 项目资格预审文件被风刮落，盖住了他的壳。蟹老板顺势钻进文件袋，在“投标人须知”里睡了一夜。第二天，人们只看见文件袋自己在地上横着走，留下一道盐霜般的字迹——“评分条款 3.2.5，缺‘项目经理无在建承诺’，扣 5 分。”</p><p>从此，招标办的人开始传说：有一只蟹，能在一夜间把废标变成满分。</p><h3>第二章 蟹行水印</h3><p>蟹老板修炼成精后，开了一家只有夜色里才能找到的打印店，招牌是“水印事务所”。</p><p>店里没有电脑，只有一只古旧的铜盆。客户把 U 盘插进去，水面立刻浮出投标文件的三维幻影：暗标章在左侧第 17 页“咔哒”一声自动归位，技术暗标里的 BIM 模型像珊瑚一样长出关键节点。最神的是报价部分——铜盆里会升起一串气泡，每个气泡里都是竞争对手历史下浮率，蟹老板用钳子“啪”地戳破一个，下浮点就自动减 0.5%，不多不少正好踩在基准价上。</p><p>据说，中过标的客户第二天醒来，只记得梦里一只青灰色的蟹，举着激光笔在页边距 2.5 厘米处画了一道红线。那红线后来谁也擦不掉，复印、扫描、OCR 识别都带着淡淡蟹影，成了蟹老板的防伪水印。</p><h3>第三章 废标劫</h3><p>2018 年，滨海市轨交 8 号线招标，蟹老板帮一家小企业做标书。开标前夜，竞争对手请来“流标鬼”，在服务器里植入 0.01% 的乱码。</p><p>蟹老板不慌，把整份投标文件拆成 17 万片碎壳，每片壳背刻一行小楷，再让壳片顺着网线游回招标中心主机，像寄居蟹排队钻进新壳。凌晨 3:33，主机风扇突然停转，屏幕闪出一只蟹的剪影——0.01% 的乱码被夹成了“技术可行”四个字。</p><p>开标结果公布，小企业以 0.13 分的优势险胜。评委组组长后来回忆：“唱标时，我闻到一股淡淡海腥味，PPT 目录页右下角有一只蟹的水印，心里就踏实了。”</p><h3>第四章 壳归大海</h3><p>蟹老板最后一次出现，是在 2025 年 8 月 7 日——也就是今天。</p><p>滨海市发布全球首个“深海浮式风电 EPC”资格预审，公告里暗藏一条：投标文件须用“可降解海藻纤维纸”打印，且不得出现任何与海洋有关的暗纹。所有投标人都犯了难：不用海洋元素，那还是滨海项目吗？</p><p>当晚，招标中心门口出现一只褪色的青壳，壳里夹着一张对折的纸，纸上没有字，只有一道波浪形的压痕。第二天，所有投标人的技术暗标里，都自动多了一页“海洋环境零影响承诺”，字体像盐粒一样闪着微光。评标专家翻到这页时，耳边仿佛响起潮汐声，集体给出满分。</p><p>而蟹老板，却再没人见过。有人说他在退潮时爬回了合同之海；也有人说，他化成了招标文件里 2.5 厘米的页边距，从此活在每一份认真编制的标书里。</p><h3>尾声</h3><p>后来，标书制作行业流传一条不成文的规矩：打印前，先在封面空白处敲三下，喊一声“蟹老板，扣零分”。如果打印机突然“吱”地空转一声，就表示老人家已经收到，这份标书必定暗标不泄密、明标不废标、报价不踩雷。</p><p>于是，每当深夜的打印店灯火通明，总能听见细碎的脚步声——像是一只蟹，在纸堆里悄悄行走。</p></div></div></div>

    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">联系方式</h3>
                <span class="close" onclick="closeContactModal()">&times;</span>
            </div>
            <div class="contact-content">
                <p id="contactTextDisplay" class="contact-text"></p>
                <img id="contactQRCodeDisplay" src="" alt="二维码">
            </div>
        </div>
    </div>

    <!-- ======= 新增：底部访客统计显示牌 ======= -->
    <footer class="site-footer">
        <div class="footer-inner">
            <div class="counter-badge" aria-live="polite" aria-atomic="true">
                <span class="counter-dot" aria-hidden="true"></span>
                <span class="counter-text">访客总数</span>
                <span class="counter-number" id="visitCount">—</span>
            </div>
            <div class="footer-tip">© <span id="yearNow"></span> 蟹老板软件屋 · 托管于 GitHub Pages</div>
        </div>
    </footer>

    <!-- 开场粒子 Loading 动画脚本（与主逻辑隔离） -->
    <script>
    (function () {
        const overlay = document.getElementById('loadingScreen');
        const canvas  = document.getElementById('loadingCanvas');
        const ctx = canvas.getContext('2d');

        function resize(){
            const dpr = Math.max(window.devicePixelRatio||1,1);
            canvas.width  = Math.floor(window.innerWidth  * dpr);
            canvas.height = Math.floor(window.innerHeight * dpr);
            canvas.style.width  = window.innerWidth  + 'px';
            canvas.style.height = window.innerHeight + 'px';
            ctx.setTransform(dpr,0,0,dpr,0,0);
        }
        resize();
        window.addEventListener('resize', resize);

        const COUNT = Math.min(180, Math.floor((window.innerWidth*window.innerHeight)/12000));
        const particles = new Array(COUNT).fill(0).map(()=>({
            x: Math.random()*window.innerWidth,
            y: Math.random()*window.innerHeight,
            r: Math.random()*2+0.6,
            vx: (Math.random()-0.5)*1.6,
            vy: (Math.random()-0.5)*1.6
        }));

        function tick(){
            ctx.clearRect(0,0,window.innerWidth,window.innerHeight);

            // 连线
            for(let i=0;i<particles.length;i++){
                const a = particles[i];
                for(let j=i+1;j<particles.length;j++){
                    const b=particles[j];
                    const dx=a.x-b.x, dy=a.y-b.y, dist=Math.hypot(dx,dy);
                    if(dist<110){
                        ctx.globalAlpha = 1 - dist/110;
                        ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y);
                        ctx.lineWidth = 1; ctx.strokeStyle = '#00d9ff'; ctx.stroke();
                        ctx.globalAlpha = 1;
                    }
                }
            }

            // 点
            ctx.fillStyle = '#00f2fe';
            for(const p of particles){
                p.x+=p.vx; p.y+=p.vy;
                if(p.x<0||p.x>window.innerWidth)  p.vx*=-1;
                if(p.y<0||p.y>window.innerHeight) p.vy*=-1;
                ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
            }

            requestAnimationFrame(tick);
        }
        tick();

        // 2.5 秒后淡出
        setTimeout(()=>{
            overlay.classList.add('fadeOut');
            setTimeout(()=> overlay.remove(), 1000);
        }, 2500);
    })();
    </script>

    <!-- 全站鼠标霓虹尾迹（不影响原有逻辑） -->
    <script>
    (function () {
        const canvas = document.getElementById('cursorCanvas');
        if(!canvas) return;
        const ctx = canvas.getContext('2d');
        let dpr = Math.max(1, window.devicePixelRatio || 1);

        const state = {
            w: window.innerWidth, h: window.innerHeight,
            x: window.innerWidth/2, y: window.innerHeight/2,
            vx: 0, vy:0, lastX: null, lastY: null,
            particles: [],
            maxParticles: 140,
            spawnPerMove: 6,
            hueA: 190, /* ≈ #00f2fe */
            hueB: 205, /* ≈ #4facfe */
            ringScale: 1, ringTarget: 1,
            visible: false,
            reduced: window.matchMedia('(prefers-reduced-motion: reduce)').matches
        };

        function resize(){
            dpr = Math.max(1, window.devicePixelRatio || 1);
            canvas.width  = Math.floor(window.innerWidth  * dpr);
            canvas.height = Math.floor(window.innerHeight * dpr);
            canvas.style.width  = window.innerWidth  + 'px';
            canvas.style.height = window.innerHeight + 'px';
            ctx.setTransform(dpr,0,0,dpr,0,0);
            state.w = window.innerWidth; state.h = window.innerHeight;
        }
        resize();
        window.addEventListener('resize', resize);

        const clamp = (n,a,b)=>Math.max(a,Math.min(b,n));
        const rand = (a,b)=>a+(b-a)*Math.random();

        function onMove(e){
            state.x = ('touches' in e) ? (e.touches[0]?.clientX ?? state.x) : e.clientX;
            state.y = ('touches' in e) ? (e.touches[0]?.clientY ?? state.y) : e.clientY;
            state.visible = true;

            if(state.lastX!=null){ state.vx = state.x - state.lastX; state.vy = state.y - state.lastY; }
            state.lastX=state.x; state.lastY=state.y;

            // 生成粒子（随速度略增）
            const speed = Math.hypot(state.vx, state.vy);
            const count = Math.min(state.spawnPerMove, 2 + Math.floor(speed/6));
            for(let i=0;i<count;i++){
                state.particles.push({
                    x: state.x + rand(-2,2),
                    y: state.y + rand(-2,2),
                    vx: state.vx*0.12 + rand(-0.6,0.6),
                    vy: state.vy*0.12 + rand(-0.6,0.6),
                    life: rand(0.5,1.2),
                    maxLife: rand(0.6,1.4),
                    r: rand(1.2,2.2),
                    hue: rand(state.hueA, state.hueB)
                });
            }
            if(state.particles.length>state.maxParticles){
                state.particles.splice(0, state.particles.length - state.maxParticles);
            }
        }

        function onLeave(){ state.visible=false; }
        function onDown(){ state.ringTarget=0.85; }
        function onUp(){ state.ringTarget=1; }

        window.addEventListener('mousemove', onMove, {passive:true});
        window.addEventListener('touchstart', onMove, {passive:true});
        window.addEventListener('touchmove', onMove, {passive:true});
        window.addEventListener('mouseleave', onLeave);
        window.addEventListener('touchend', onLeave);
        window.addEventListener('mousedown', onDown);
        window.addEventListener('mouseup', onUp);

        // 自适应性能：自动降档
        (function adaptive(){
            const start = performance.now(); let frames=0;
            function tmp(){ frames++; if(performance.now()-start<600) requestAnimationFrame(tmp); else{
                const fps = frames/0.6;
                if(fps<45){ state.maxParticles=90; state.spawnPerMove=4; }
                if(fps<30){ state.maxParticles=60; state.spawnPerMove=3; }
            }}
            requestAnimationFrame(tmp);
        })();

        function drawRing(){
            if(!state.visible) return;
            const x=state.x, y=state.y, baseR=8;
            state.ringScale += (state.ringTarget - state.ringScale) * 0.15;
            const r = baseR * state.ringScale;

            // 外发光
            ctx.beginPath(); ctx.arc(x,y,r+6,0,Math.PI*2);
            ctx.strokeStyle='rgba(0,242,254,0.25)'; ctx.lineWidth=6; ctx.stroke();

            // 主环
            ctx.beginPath(); ctx.arc(x,y,r,0,Math.PI*2);
            ctx.strokeStyle='#00f2fe'; ctx.lineWidth=2; ctx.stroke();

            // 内点
            ctx.beginPath(); ctx.arc(x,y,1.5,0,Math.PI*2);
            ctx.fillStyle='#4facfe'; ctx.fill();
        }

        function step(dt){
            ctx.clearRect(0,0,state.w,state.h);

            // 近距离连线
            for(let i=0;i<state.particles.length;i++){
                const a=state.particles[i];
                for(let j=i+1;j<state.particles.length;j++){
                    const b=state.particles[j];
                    const dx=a.x-b.x, dy=a.y-b.y, dist=Math.hypot(dx,dy);
                    if(dist<90){
                        const alpha = clamp(1 - dist/90, 0, 1) * 0.6;
                        ctx.globalAlpha = alpha;
                        ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y);
                        ctx.lineWidth = 1; ctx.strokeStyle = 'rgba(0,217,255,1)'; ctx.stroke();
                        ctx.globalAlpha = 1;
                    }
                }
            }

            // 粒子
            for(let i=state.particles.length-1;i>=0;i--){
                const p=state.particles[i];
                p.x += p.vx * (state.reduced?0.6:1);
                p.y += p.vy * (state.reduced?0.6:1);
                p.life += dt;
                const t = p.life/p.maxLife;
                if(t>=1){ state.particles.splice(i,1); continue; }

                const alpha = (1-t)*0.9;
                // 光晕
                ctx.beginPath(); ctx.arc(p.x,p.y,p.r*2.3,0,Math.PI*2);
                ctx.fillStyle = `hsla(${p.hue},100%,60%,${alpha*0.25})`; ctx.fill();

                // 点核
                ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
                ctx.fillStyle = `hsla(${p.hue},100%,60%,${alpha})`; ctx.fill();
            }

            drawRing();
        }

        let last = performance.now();
        (function loop(){
            const t = performance.now();
            const dt = Math.min(0.06, (t - last)/1000);
            last = t;
            step(dt);
            requestAnimationFrame(loop);
        })();

        // 移动端体验：恢复系统指针类（移动端默认无指针）
        if('ontouchstart' in window){ document.body.classList.remove('mousefx-enabled'); }
    })();
    </script>

    <!-- 原有脚本：网站核心逻辑（未改动功能） -->
    <script>
    // 站点数据（硬编码）
    const IMAGE_BASE_PATH = 'images/';

    const softwareListData = [
        { id: 1, name: "国网调价工具", version: "v2.1.0", description: "国网EPC快速调价(五种调价方式)，单价分析表快速导出，支持数据备份与恢复。", imagePath: "调价工具.png", downloadUrl: "https://www.bilibili.com/video/BV1p5EvzvEin/" },
        { id: 2, name: "批量转换双层PDF", version: "v1.8.3", description: "双层pdf批量转换工具，直接从word开始转换，省去中间步骤操作方便。", imagePath: "双层PDF.jpg", downloadUrl: "https://www.bilibili.com/video/BV16GgZejEcD/" },
        { id: 3, name: "国网算分工具", version: "v1.0", description: "国网算分工具 Ver 1.0.0.1 ……（此处保留你的原描述）", imagePath: "算分工具.jpg", downloadUrl: "https://www.bilibili.com/video/BV1yTGtzvEBD/" },
        { id: 4, name: "PDF文件转图片插入到WORD", version: "v1.0", description: "可以批量把PDF文件转换成图片直接插入到WORD文档中", imagePath: "PDF文件转图片插入到WORD.png", downloadUrl: "#" },
        { id: 5, name: "Word文档批量页码编排器", version: "v1.0", description: "针对南方电网投标开发可批量把多个文件按顺序更新页码。", imagePath: "Word文档批量页码编排器.png", downloadUrl: "https://www.bilibili.com/video/BV1Pj411H7vm/" },
        { id: 6, name: "国网技术规范书批量响应工具", version: "v1.0", description: "针对国网开发可以批量响应国网技术规范书,包括批量响应表格内容", imagePath: "国网技术规范书批量响应工具.png", downloadUrl: "https://www.bilibili.com/video/BV1CDtizwEaA/" },
        { id: 7, name: "批量盖章软件", version: "v1.0", description: "可批量盖公章可批量盖骑缝章可智能定位落款位置盖章可指定位盖章", imagePath: "批量盖章软件.png", downloadUrl: "https://www.bilibili.com/video/BV1raG4zbEpe/" },
        { id: 8, name: "图片批量调整工具", version: "v1.0", description: "可批量对文档中的图片进行尺寸变更操作", imagePath: "图片批量调整工具.png", downloadUrl: "#" },
        { id: 9, name: "南方电网投标辅助工具", version: "v1.0", description: "批量生成超级链接", imagePath: "标题匹配.png", downloadUrl: "https://www.bilibili.com/video/BV1yTjuz4E5W/" },
        { id: 10, name: "南方电网投标辅助工具", version: "v1.0", description: "批量双向超级链接", imagePath: "批量双向超级链接.png", downloadUrl: "https://www.bilibili.com/video/BV1BW77zrEWD/" }
    ];

    const notificationSettingsData = {
        text: "🎉 欢迎来到蟹老板软件屋！想加入国网南网技术交流群的朋友，可以加我微信，我拉你入群 微信1群已满 微信2群（未满492人） 微信3群（未满492人）",
        direction: "left",
        speed: "normal"
    };
    const logoSettingsData = { iconPath: 'LOGO.jpg', text: '蟹老板软件屋' };
    const contactSettingsData = { text: "蟹老板 QQ:625383053", qrCodePath: "二维码.jpg" };

    let softwareList = [...softwareListData];
    let notificationSettings = { ...notificationSettingsData };
    let logoSettings = { ...logoSettingsData };
    let contactSettings = { ...contactSettingsData };

    let isLoggedIn = false, currentEditId = null;
    const adminCredentials = { username: "admin", password: "123456" };

    // ====== 渲染 ======
    function renderSoftwareGrid(){
        const grid = document.getElementById('software-showcase');
        grid.innerHTML = softwareList.map(s=>`
            <div class="software-card">
                <div class="software-image-container">
                    <img src="${IMAGE_BASE_PATH}${s.imagePath}" alt="${s.name}" class="software-image"
                         onerror="this.style.display='none'; this.parentElement.style.display='none';">
                </div>
                <h3 class="software-title">${s.name}</h3>
                <p class="software-version">${s.version}</p>
                <p class="software-description">${s.description}</p>
                <button class="download-btn" onclick="if('${s.downloadUrl}'!=='#'){window.open('${s.downloadUrl}','_blank')}">立即下载</button>
            </div>
        `).join('');
    }

    function renderAdminTable(){
        const tbody = document.getElementById('admin-table-body');
        tbody.innerHTML = softwareList.map((s, index)=>`
            <tr>
                <td><img src="${IMAGE_BASE_PATH}${s.imagePath}" alt="${s.name}" class="admin-table-image" onerror="this.style.display='none';"></td>
                <td>${s.name}</td>
                <td>${s.version}</td>
                <td>${(s.description||'').substring(0,50)}...</td>
                <td>
                    <button class="order-btn" onclick="moveSoftwareUp(${s.id})" ${index===0?'disabled':''}>↑</button>
                    <button class="order-btn" onclick="moveSoftwareDown(${s.id})" ${index===softwareList.length-1?'disabled':''}>↓</button>
                </td>
                <td>
                    <button class="action-btn edit-btn" onclick="editSoftware(${s.id})">编辑</button>
                    <button class="action-btn delete-btn" onclick="deleteSoftware(${s.id})">删除</button>
                </td>
            </tr>
        `).join('');
    }

    const renderAll = ()=>{ renderSoftwareGrid(); renderAdminTable(); };

    // ====== 设置更新 ======
    function updateLogo(){
        const iconEl = document.getElementById('logoIcon');
        document.getElementById('logoText').textContent = logoSettings.text || '';
        if(logoSettings.iconPath){
            iconEl.src = `${IMAGE_BASE_PATH}${logoSettings.iconPath}`;
            iconEl.style.display = 'inline-block';
        }else{
            iconEl.style.display = 'none';
        }
    }

    function updateNotificationBar(){
        const wrapper = document.querySelector('.notification-content-wrapper');
        const el = document.getElementById('notificationContent');
        el.textContent = notificationSettings.text || '';
        wrapper.className = 'notification-content-wrapper';
        if(notificationSettings.direction === 'right') wrapper.classList.add('scroll-right');
        const speedMap = { slow:'30s', normal:'20s', fast:'10s' };
        wrapper.style.animationDuration = speedMap[notificationSettings.speed] || '20s';
    }

    function updateContactModal(){
        const textEl = document.getElementById('contactTextDisplay');
        const qrCodeEl = document.getElementById('contactQRCodeDisplay');
        textEl.textContent = contactSettings.text || '';
        if(contactSettings.qrCodePath){
            qrCodeEl.src = IMAGE_BASE_PATH + contactSettings.qrCodePath;
            qrCodeEl.style.display = 'block';
        }else{
            qrCodeEl.style.display = 'none';
        }
    }

    // ====== 弹窗工具 ======
    const showModal = (id, setup)=>{ if(setup) setup(); document.getElementById(id).style.display='block'; };
    const hideModal = (id)=>{ document.getElementById(id).style.display='none'; };

    function closeModal(){ hideModal('softwareModal'); }
    function closeLogoSettingsModal(){ hideModal('logoSettingsModal'); }
    function closeNotificationModal(){ hideModal('notificationModal'); }
    function closeContactSettingsModal(){ hideModal('contactSettingsModal'); }
    function closeLoginModal(){ hideModal('loginModal'); }
    function closeAboutUsModal(){ hideModal('aboutUsModal'); }
    function closeContactModal(){ hideModal('contactModal'); }

    // ====== 页面跳转/滚动 ======
    function showHome(){
        document.getElementById('home-content').style.display='block';
        document.getElementById('admin-content').style.display='none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    function showAdminPanel(){
        document.getElementById('home-content').style.display='none';
        document.getElementById('admin-content').style.display='block';
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    function scrollToSoftware(){
        showHome();
        const el = document.getElementById('software-showcase');
        const top = el.getBoundingClientRect().top + window.scrollY - 120;
        window.scrollTo({ top, behavior: 'smooth' });
    }

    // ====== 事件：导航 & 弹窗 ======
    function showAdmin(){ if(!isLoggedIn) showLoginModal(); else showAdminPanel(); }
    function showLoginModal(){ showModal('loginModal'); }
    function showAddModal(){
        if(!isLoggedIn){ showLoginModal(); return; }
        showModal('softwareModal', ()=>{
            currentEditId = null;
            document.getElementById('modalTitle').textContent='添加新软件';
            ['softwareName','softwareVersion','softwareDescription','imagePath','downloadUrl'].forEach(id=>document.getElementById(id).value='');
            updateImagePathPreview('', 'imagePathPreview');
        });
    }
    function editSoftware(id){
        if(!isLoggedIn){ showLoginModal(); return; }
        const software = softwareList.find(s=>s.id===id);
        if(!software) return;
        showModal('softwareModal', ()=>{
            currentEditId = id;
            document.getElementById('modalTitle').textContent='编辑软件';
            document.getElementById('softwareName').value = software.name || '';
            document.getElementById('softwareVersion').value = software.version || '';
            document.getElementById('softwareDescription').value = software.description || '';
            document.getElementById('imagePath').value = software.imagePath || '';
            document.getElementById('downloadUrl').value = software.downloadUrl || '';
            updateImagePathPreview(software.imagePath, 'imagePathPreview');
        });
    }
    function showLogoSettingsModal(){
        if(!isLoggedIn){ showLoginModal(); return; }
        showModal('logoSettingsModal', ()=>{
            document.getElementById('logoTextInput').value = logoSettings.text || '';
            document.getElementById('logoPathInput').value = logoSettings.iconPath || '';
            updateImagePathPreview(logoSettings.iconPath, 'logoPathPreview');
        });
    }
    function showNotificationModal(){
        if(!isLoggedIn){ showLoginModal(); return; }
        showModal('notificationModal', ()=>{
            document.getElementById('notificationText').value = notificationSettings.text || '';
            document.getElementById('scrollDirection').value = notificationSettings.direction || 'left';
            document.getElementById('scrollSpeed').value    = notificationSettings.speed || 'normal';
        });
    }
    function showContactSettingsModal(){
        if(!isLoggedIn){ showLoginModal(); return; }
        showModal('contactSettingsModal', ()=>{
            document.getElementById('contactText').value = contactSettings.text || '';
            document.getElementById('contactQRCodePath').value = contactSettings.qrCodePath || '';
            updateImagePathPreview(contactSettings.qrCodePath, 'contactQRCodePreview');
        });
    }
    function showAbout(){ showModal('aboutUsModal'); }
    function showContact(){ updateContactModal(); showModal('contactModal'); }

    // ====== 图片预览 ======
    function updateImagePathPreview(fileName, previewId){
        const img = document.getElementById(previewId);
        if(fileName){
            img.src = IMAGE_BASE_PATH + fileName;
            img.style.display = 'block';
        }else{
            img.style.display = 'none';
        }
    }

    // ====== CRUD / 排序 ======
    function saveSoftware(){
        const name = document.getElementById('softwareName').value.trim();
        const imagePath = document.getElementById('imagePath').value.trim();
        if(!name || !imagePath){ alert('软件名称和截图文件名是必填项！'); return; }
        const softwareData = {
            name,
            version: document.getElementById('softwareVersion').value.trim(),
            description: document.getElementById('softwareDescription').value.trim(),
            imagePath,
            downloadUrl: document.getElementById('downloadUrl').value.trim()
        };
        if(currentEditId){
            const index = softwareList.findIndex(s=>s.id===currentEditId);
            if(index>=0) softwareList[index] = { ...softwareList[index], ...softwareData };
        }else{
            softwareList.push({ id: Date.now(), ...softwareData });
        }
        renderAll(); closeModal();
        alert('软件信息已临时保存！刷新页面后将恢复原状。');
    }

    function deleteSoftware(id){
        const name = softwareList.find(s=>s.id===id)?.name || '';
        if(confirm(`确定要删除软件 "${name}" 吗？(刷新后恢复)`)){
            softwareList = softwareList.filter(s=>s.id!==id);
            renderAll();
            alert('软件已临时删除。');
        }
    }

    function moveSoftwareUp(id){
        const i = softwareList.findIndex(s=>s.id===id);
        if(i>0){ [softwareList[i-1], softwareList[i]] = [softwareList[i], softwareList[i-1]]; renderAll(); }
    }
    function moveSoftwareDown(id){
        const i = softwareList.findIndex(s=>s.id===id);
        if(i<softwareList.length-1){ [softwareList[i], softwareList[i+1]] = [softwareList[i+1], softwareList[i]]; renderAll(); }
    }

    // ====== 登录/退出 ======
    function performLogin(){
        const u = document.getElementById('username').value;
        const p = document.getElementById('password').value;
        if(u===adminCredentials.username && p===adminCredentials.password){
            isLoggedIn = true; closeLoginModal(); showAdminPanel(); alert('登录成功！');
        }else{
            alert('用户名或密码错误！');
        }
    }
    function logout(){ isLoggedIn=false; showHome(); alert('已成功退出登录'); }

    // ====== 初始化 ======
    function init(){
        updateLogo();
        updateNotificationBar();
        updateContactModal();
        renderAll();
    }
    document.addEventListener('DOMContentLoaded', init);
    </script>

    <!-- ===== 新增：CountAPI 访客统计脚本 ===== -->
    <script>
    (function(){
        // 当前年份显示
        document.getElementById('yearNow').textContent = new Date().getFullYear();

        // 使用 CountAPI（无后台，纯前端可用）
        // 文档：https://countapi.xyz/
        const NAMESPACE = 'wyf-cloud.github.io';
        const KEY = 'xielaobanderuanjianwu';

        // 如果首次使用，无需手动创建，直接 hit 会自动创建并 +1
        const url = `https://api.countapi.xyz/hit/${encodeURIComponent(NAMESPACE)}/${encodeURIComponent(KEY)}?amount=1`;

        // 超时控制，避免网络问题卡住
        const controller = new AbortController();
        const timer = setTimeout(()=>controller.abort(), 8000);

        fetch(url, { signal: controller.signal })
            .then(res => res.json())
            .then(data => {
                clearTimeout(timer);
                // 返回示例：{ "namespace": "...", "key": "...", "value": 123, "update_lowerbound": 1, "ttl": -1 }
                const val = (data && typeof data.value === 'number') ? data.value : null;
                const el = document.getElementById('visitCount');
                el.textContent = val !== null ? val.toLocaleString() : '—';
                el.title = '由 CountAPI 提供计数服务';
            })
            .catch(err => {
                clearTimeout(timer);
                // 失败时显示占位，不影响页面其它功能
                const el = document.getElementById('visitCount');
                el.textContent = '—';
                el.title = '计数服务暂时不可用';
                // 可选：在控制台记录错误
                console.warn('[CountAPI] 计数失败：', err);
            });
    })();
    </script>
</body>
</html>
