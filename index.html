<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŸ¹è€æ¿è½¯ä»¶å±‹</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', 'Microsoft YaHei', sans-serif; background: #0a0a0f; color: #ffffff; overflow-x: hidden; }
        .bg-animation { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: linear-gradient(45deg, #0a0a0f, #1a1a2e, #16213e); animation: gradientShift 15s ease infinite; }
        @keyframes gradientShift { 0%, 100% { background: linear-gradient(45deg, #0a0a0f, #1a1a2e, #16213e); } 50% { background: linear-gradient(45deg, #16213e, #0a0a0f, #1a1a2e); } }
        nav { position: fixed; top: 0; width: 100%; padding: 20px 50px; background: rgba(10, 10, 15, 0.9); backdrop-filter: blur(10px); z-index: 1000; transition: all 0.3s ease; }
        .notification-bar { position: fixed; top: 80px; width: 100%; height: 50px; background: linear-gradient(45deg, rgba(79, 172, 254, 0.2), rgba(0, 242, 254, 0.2)); border-top: 1px solid rgba(79, 172, 254, 0.3); border-bottom: 1px solid rgba(79, 172, 254, 0.3); overflow: hidden; z-index: 999; display: flex; align-items: center; }
        .notification-content-wrapper { display: inline-block; animation: scrollLeft 20s linear infinite; }
        .notification-content-wrapper.scroll-right { animation-name: scrollRight; }
        @keyframes scrollLeft { 0% { transform: translateX(100vw); } 100% { transform: translateX(-100%); } }
        @keyframes scrollRight { 0% { transform: translateX(-100%); } 100% { transform: translateX(100vw); } }
        .nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; }
        .logo { font-size: 24px; font-weight: bold; cursor: pointer; display: flex; align-items: center; z-index: 1001; }
        #logoIcon { height: 30px; margin-right: 10px; }
        #logoText { background: linear-gradient(45deg, #4facfe, #00f2fe); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .nav-links { display: flex; list-style: none; gap: 30px; }
        .nav-links a { color: #ffffff; text-decoration: none; transition: all 0.3s ease; position: relative; }
        .nav-links a:hover { color: #4facfe; }
        .nav-links a::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 0; height: 2px; background: linear-gradient(45deg, #4facfe, #00f2fe); transition: width 0.3s ease; }
        .nav-links a:hover::after { width: 100%; }
        .admin-btn { padding: 10px 20px; background: linear-gradient(45deg, #4facfe, #00f2fe); border: none; border-radius: 25px; color: white; cursor: pointer; transition: all 0.3s ease; }
        .admin-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3); }
        .main-content { padding-top: 150px; min-height: 100vh; }
        .hero-section { text-align: center; padding: 100px 50px; max-width: 1200px; margin: 0 auto; }
        .hero-title { font-size: 4rem; margin-bottom: 20px; background: linear-gradient(45deg, #4facfe, #00f2fe); -webkit-background-clip: text; -webkit-text-fill-color: transparent; animation: slideInUp 1s ease; }
        .hero-subtitle { font-size: 1.5rem; margin-bottom: 40px; opacity: 0.8; animation: slideInUp 1s ease 0.2s both; }
        @keyframes slideInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        .software-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 30px; padding: 50px; max-width: 1200px; margin: 0 auto; }
        .software-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 15px; padding: 30px; transition: all 0.3s ease; backdrop-filter: blur(10px); display: flex; flex-direction: column; }
        .software-card:hover { transform: translateY(-10px); border-color: rgba(79, 172, 254, 0.8); box-shadow: 0 20px 40px rgba(79, 172, 254, 0.2); }
        .software-image-container { width: 100%; height: 200px; border-radius: 10px; margin-bottom: 20px; background-color: rgba(0,0,0,0.2); overflow: hidden; }
        .software-image { width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s ease; }
        .software-card:hover .software-image { transform: scale(1.05); }
        .software-title { font-size: 1.5rem; margin-bottom: 10px; color: #4facfe; }
        .software-description { opacity: 0.8; line-height: 1.6; margin-bottom: 20px; flex-grow: 1; }
        .software-version { font-size: 0.9rem; color: #00f2fe; margin-bottom: 15px; }
        .download-btn { padding: 12px 25px; background: linear-gradient(45deg, #4facfe, #00f2fe); border: none; border-radius: 25px; color: white; cursor: pointer; transition: all 0.3s ease; width: 100%; margin-top: auto; }
        .download-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3); }
        .admin-panel { display: none; padding: 50px; max-width: 1200px; margin: 0 auto; }
        .admin-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 40px; flex-wrap: wrap; }
        .admin-title { font-size: 2.5rem; background: linear-gradient(45deg, #4facfe, #00f2fe); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .add-software-btn { padding: 15px 30px; background: linear-gradient(45deg, #4facfe, #00f2fe); border: none; border-radius: 25px; color: white; cursor: pointer; font-size: 1rem; transition: all 0.3s ease; margin-top: 10px; }
        .add-software-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3); }
        .admin-table { background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 30px; backdrop-filter: blur(10px); border: 1px solid rgba(79, 172, 254, 0.3); overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid rgba(79, 172, 254, 0.2); vertical-align: middle; white-space: nowrap; }
        th { background: rgba(79, 172, 254, 0.1); color: #4facfe; font-weight: bold; }
        .admin-table-image { width: 100px; height: 60px; object-fit: cover; border-radius: 5px; }
        .action-btn { padding: 8px 15px; border: none; border-radius: 20px; cursor: pointer; margin: 0 5px; transition: all 0.3s ease; }
        .edit-btn { background: linear-gradient(45deg, #4facfe, #00f2fe); color: white; }
        .delete-btn { background: linear-gradient(45deg, #ff416c, #ff4b2b); color: white; }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); }
        .order-btn { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(79, 172, 254, 0.3); color: white; width: 30px; height: 30px; border-radius: 50%; padding: 0; margin: 0 2px; }
        .order-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); overflow-y: auto; }
        .modal-content { background: rgba(26, 26, 46, 0.95); margin: 5% auto; padding: 40px; border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 15px; width: 90%; max-width: 600px; backdrop-filter: blur(10px); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .modal-title { font-size: 1.8rem; color: #4facfe; }
        .close { color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s ease; }
        .close:hover { color: #4facfe; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; color: #4facfe; font-weight: bold; }
        .form-group input, .form-group textarea { width: 100%; padding: 12px; border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 8px; background: rgba(255, 255, 255, 0.05); color: white; font-size: 1rem; transition: all 0.3s ease; }
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus { outline: none; border-color: #4facfe; box-shadow: 0 0 10px rgba(79, 172, 254, 0.3); }
        .form-group textarea { height: 100px; resize: vertical; }
        .image-preview-area { margin-top: 10px; }
        .image-preview { max-width: 100%; height: auto; max-height: 100px; border-radius: 8px; border: 1px solid rgba(79, 172, 254, 0.3); }
        .form-actions { display: flex; justify-content: flex-end; gap: 15px; margin-top: 30px; }
        .cancel-btn, .save-btn { padding: 12px 25px; border-radius: 25px; cursor: pointer; transition: all 0.3s ease; }
        .cancel-btn { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(79, 172, 254, 0.3); color: white; }
        .cancel-btn:hover { background: rgba(255, 255, 255, 0.2); }
        .save-btn { background: linear-gradient(45deg, #4facfe, #00f2fe); border: none; color: white; }
        .save-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(79, 172, 254, 0.3); }
        .about-us-content { max-height: 60vh; overflow-y: auto; line-height: 1.8; color: #ccc; padding-right: 15px; }
        .about-us-content h3 { color: #4facfe; margin-top: 25px; margin-bottom: 10px; border-left: 4px solid #00f2fe; padding-left: 10px; }
        .about-us-content p { margin-bottom: 15px; text-indent: 2em; }
        .contact-content { text-align: center; padding: 20px; color: #fff; line-height: 1.6; }
        .contact-content img { display: block; margin: 20px auto 0 auto; max-width: 100%; height: auto; max-height: 300px; border-radius: 10px; border: 1px solid rgba(79, 172, 254, 0.3); }
        .contact-text { white-space: pre-wrap; text-align: center; }

        /* ========= START: æ–°å¢çš„ç§»åŠ¨ç«¯é€‚é…æ ·å¼ ========= */
        .nav-toggle { display: none; cursor: pointer; z-index: 1001; }
        .nav-toggle span { display: block; width: 25px; height: 3px; background-color: white; margin: 5px 0; transition: all 0.3s ease-in-out; }

        /* å½“èœå•æ‰“å¼€æ—¶ï¼Œæ±‰å ¡åŒ…æŒ‰é’®å˜æˆ "X" */
        .nav-open .nav-toggle span:nth-child(1) { transform: translateY(8px) rotate(45deg); }
        .nav-open .nav-toggle span:nth-child(2) { opacity: 0; }
        .nav-open .nav-toggle span:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
        
        @media (max-width: 768px) {
            nav { padding: 20px; }
            .notification-bar { top: 70px; }
            .main-content { padding-top: 130px; }
            .hero-section { padding: 80px 20px; }
            .software-grid { padding: 30px 20px; }
            .admin-panel { padding: 30px 20px; }

            .hero-title { font-size: 2.5rem; }
            .hero-subtitle { font-size: 1.2rem; }

            .admin-header { flex-direction: column; align-items: flex-start; gap: 20px; }

            .nav-links {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: rgba(10, 10, 15, 0.98);
                backdrop-filter: blur(15px);
                flex-direction: column;
                justify-content: center;
                align-items: center;
                gap: 40px;
                transform: translateX(100%);
                transition: transform 0.3s ease-in-out;
            }
            
            .nav-open .nav-links { transform: translateX(0); }
            
            .nav-links a { font-size: 1.5rem; }
            
            .admin-btn {
                display: none; /* åœ¨ç§»åŠ¨ç«¯èœå•ä¸­å¯ä»¥å•ç‹¬åˆ›å»ºä¸€ä¸ªé“¾æ¥æ¥æ›¿ä»£ */
            }

            .nav-toggle {
                display: block; /* åªåœ¨ç§»åŠ¨ç«¯æ˜¾ç¤ºæ±‰å ¡åŒ…æŒ‰é’® */
            }
            
            /* ç¡®ä¿æ¨¡æ€æ¡†åœ¨æ‰‹æœºä¸Šä¹Ÿæœ‰å¥½çš„è¾¹è· */
            .modal-content { padding: 25px; }
        }
        /* ========= END: æ–°å¢çš„ç§»åŠ¨ç«¯é€‚é…æ ·å¼ ========= */
    </style>
</head>
<body>
    <div class="bg-animation"></div>

    <nav>
        <div class="nav-container">
            <div class="logo" onclick="showHome()">
                <img id="logoIcon" src="" alt="Logo Icon" style="display: none;">
                <span id="logoText"></span>
            </div>
            
            <!-- START: ç§»åŠ¨ç«¯å¯¼èˆªé“¾æ¥å’Œç®¡ç†åå°æŒ‰é’®è¢«ç§»åˆ°è¿™é‡Œ -->
            <ul class="nav-links">
                <li><a href="#" onclick="showHome(); closeMobileMenu();">é¦–é¡µ</a></li>
                <li><a href="#" onclick="scrollToSoftware(); closeMobileMenu();">è½¯ä»¶å±•ç¤º</a></li>
                <li><a href="#" onclick="showAbout(); closeMobileMenu();">èŸ¹è€æ¿çš„ä¼ è¯´</a></li>
                <li><a href="#" onclick="showContact(); closeMobileMenu();">è”ç³»æ–¹å¼</a></li>
                <!-- åœ¨ç§»åŠ¨èœå•ä¸­ä¹Ÿæä¾›åå°å…¥å£ -->
                <li><a href="#" onclick="showAdmin(); closeMobileMenu();" class="admin-btn-mobile" style="color: #4facfe;">ç®¡ç†åå°</a></li>
            </ul>
            <!-- END -->

            <button class="admin-btn" onclick="showAdmin()">ç®¡ç†åå°</button>

            <!-- START: æ–°å¢çš„æ±‰å ¡åŒ…èœå•æŒ‰é’® -->
            <div class="nav-toggle" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <!-- END -->
        </div>
    </nav>

    <div class="notification-bar">
        <div class="notification-content-wrapper">
            <span id="notificationContent"></span>
        </div>
    </div>

    <div class="main-content">
        <div id="home-content">
            <div class="hero-section">
                <h1 class="hero-title">åˆ›æ–°è½¯ä»¶è§£å†³æ–¹æ¡ˆ</h1>
                <p class="hero-subtitle">æ¢ç´¢æœªæ¥ç§‘æŠ€ï¼Œä½“éªŒæè‡´åˆ›æ–°</p>
            </div>
            <div id="software-showcase" class="software-grid"></div>
        </div>

        <div id="admin-content" class="admin-panel">
            <div class="admin-header">
                <h2 class="admin-title">è½¯ä»¶ç®¡ç†åå°</h2>
                <div>
                    <button class="add-software-btn" onclick="showContactSettingsModal()" style="margin-right: 15px;">è”ç³»è®¾ç½®</button>
                    <button class="add-software-btn" onclick="showLogoSettingsModal()" style="margin-right: 15px;">Logoè®¾ç½®</button>
                    <button class="add-software-btn" onclick="showNotificationModal()" style="margin-right: 15px;">é€šçŸ¥è®¾ç½®</button>
                    <button class="add-software-btn" onclick="showAddModal()" style="margin-right: 15px;">æ·»åŠ æ–°è½¯ä»¶</button>
                    <button class="add-software-btn" onclick="logout()" style="background: linear-gradient(45deg, #ff416c, #ff4b2b);">é€€å‡ºç™»å½•</button>
                </div>
            </div>
            <div class="admin-table">
                <table>
                    <thead>
                        <tr>
                            <th>è½¯ä»¶æˆªå›¾</th>
                            <th>è½¯ä»¶åç§°</th>
                            <th>ç‰ˆæœ¬</th>
                            <th>æè¿°</th>
                            <th>æ’åº</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="admin-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <div id="softwareModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title" id="modalTitle"></h3><span class="close" onclick="closeModal()">&times;</span></div><div><div class="form-group"><label for="softwareName">è½¯ä»¶åç§°</label><input type="text" id="softwareName"></div><div class="form-group"><label for="softwareVersion">ç‰ˆæœ¬å·</label><input type="text" id="softwareVersion"></div><div class="form-group"><label for="softwareDescription">è½¯ä»¶æè¿°</label><textarea id="softwareDescription"></textarea></div><div class="form-group"><label for="imagePath">è½¯ä»¶æˆªå›¾æ–‡ä»¶å</label><input type="text" id="imagePath" placeholder="ä¾‹å¦‚: screenshot.png"><div class="image-preview-area"><img id="imagePathPreview" class="image-preview" src="" style="display:none;" alt="é¢„è§ˆ"></div></div><div class="form-group"><label for="downloadUrl">ä¸‹è½½é“¾æ¥</label><input type="url" id="downloadUrl" placeholder="https://example.com/download"></div><div class="form-actions"><button type="button" class="cancel-btn" onclick="closeModal()">å–æ¶ˆ</button><button type="button" class="save-btn" onclick="saveSoftware()">ä¿å­˜</button></div></div></div></div>
    <div id="logoSettingsModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">Logo è®¾ç½®</h3><span class="close" onclick="closeLogoSettingsModal()">&times;</span></div><div><div class="form-group"><label for="logoTextInput">Logo æ–‡å­—</label><input type="text" id="logoTextInput"></div><div class="form-group"><label for="logoPathInput">Logo å›¾æ ‡æ–‡ä»¶å (å¯é€‰)</label><input type="text" id="logoPathInput" placeholder="ä¾‹å¦‚: logo.png"><div class="image-preview-area"><img id="logoPathPreview" class="image-preview" src="" style="display:none;" alt="é¢„è§ˆ"></div></div><div class="form-actions"><button type="button" class="cancel-btn" onclick="closeLogoSettingsModal()">å–æ¶ˆ</button><button type="button" class="save-btn" onclick="saveLogoSettings()">ä¿å­˜è®¾ç½®</button></div></div></div></div>
    <div id="notificationModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">é€šçŸ¥æ è®¾ç½®</h3><span class="close" onclick="closeNotificationModal()">&times;</span></div><div><div class="form-group"><label for="notificationText">é€šçŸ¥å†…å®¹</label><textarea id="notificationText"></textarea></div><div class="form-group"><label for="scrollDirection">æ»šåŠ¨æ–¹å‘</label><select id="scrollDirection" style="width: 100%; padding: 12px; border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 8px; background: rgba(255, 255, 255, 0.05); color: white; font-size: 1rem;"><option value="left" style="background: #1a1a2e; color: white;">ä»å³å‘å·¦</option><option value="right" style="background: #1a1a2e; color: white;">ä»å·¦å‘å³</option></select></div><div class="form-group"><label for="scrollSpeed">æ»šåŠ¨é€Ÿåº¦</label><select id="scrollSpeed" style="width: 100%; padding: 12px; border: 1px solid rgba(79, 172, 254, 0.3); border-radius: 8px; background: rgba(255, 255, 255, 0.05); color: white; font-size: 1rem;"><option value="slow" style="background: #1a1a2e; color: white;">æ…¢é€Ÿ (30ç§’)</option><option value="normal" style="background: #1a1a2e; color: white;" selected>æ­£å¸¸ (20ç§’)</option><option value="fast" style="background: #1a1a2e; color: white;">å¿«é€Ÿ (10ç§’)</option></select></div><div class="form-actions"><button type="button" class="cancel-btn" onclick="closeNotificationModal()">å–æ¶ˆ</button><button type="button" class="save-btn" onclick="saveNotificationSettings()">ä¿å­˜è®¾ç½®</button></div></div></div></div>
    <div id="contactSettingsModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">è”ç³»æ–¹å¼è®¾ç½®</h3><span class="close" onclick="closeContactSettingsModal()">&times;</span></div><div><div class="form-group"><label for="contactText">è”ç³»æ–¹å¼æ–‡å­—</label><textarea id="contactText" rows="5"></textarea></div><div class="form-group"><label for="contactQRCodePath">äºŒç»´ç å›¾ç‰‡æ–‡ä»¶å</label><input type="text" id="contactQRCodePath" placeholder="ä¾‹å¦‚: qrcode.png"><div class="image-preview-area"><img id="contactQRCodePreview" class="image-preview" src="" style="display:none;" alt="é¢„è§ˆ"></div></div><div class="form-actions"><button type="button" class="cancel-btn" onclick="closeContactSettingsModal()">å–æ¶ˆ</button><button type="button" class="save-btn" onclick="saveContactSettings()">ä¿å­˜è®¾ç½®</button></div></div></div></div>
    <div id="loginModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">ç®¡ç†å‘˜ç™»å½•</h3><span class="close" onclick="closeLoginModal()">&times;</span></div><div><div class="form-group"><label for="username">ç”¨æˆ·å</label><input type="text" id="username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å"></div><div class="form-group"><label for="password">å¯†ç </label><input type="password" id="password" placeholder="è¯·è¾“å…¥å¯†ç "></div><div class="form-actions" style="margin-top: 40px;"><button type="button" class="cancel-btn" onclick="closeLoginModal()">å–æ¶ˆ</button><button type="button" class="save-btn" onclick="performLogin()">ç™»å½•</button></div></div></div></div>
    <div id="aboutUsModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">èŸ¹è€æ¿çš„ä¼ è¯´ - èŸ¹è€æ¿å¤–ä¼ </h3><span class="close" onclick="closeAboutUsModal()">&times;</span></div><div class="about-us-content"><h3>ç¬¬ä¸€ç« â€ƒå£³é‡Œçš„ç¬¬ä¸€é¡µ</h3><p>åœ¨æ‹›æŠ•æ ‡çš„æ±Ÿæ¹–é‡Œï¼Œä¸€ç›´æµä¼ ç€ä¸€ä¸ªåå­—â€”â€”èŸ¹è€æ¿ã€‚ä¼ è¯´ä»–å¹¶éå‡¡äººï¼Œè€Œæ˜¯ä¸€åªä»è¿œå¤åˆåŒä¹‹æµ·é‡Œçˆ¬ä¸Šå²¸çš„å¯„å±…èŸ¹ï¼Œå£³é‡Œè—ç€çš„æ˜¯ä¸€éƒ¨ç”¨è´å£³é•Œåˆ»çš„ã€Šæ ‡ä¹¦çœŸç»ã€‹ã€‚</p><p>èŸ¹è€æ¿åˆåˆ°äººé—´æ—¶ï¼Œä¸è¿‡æ˜¯ä¸€åªæŒ‡ç”²ç›–å¤§çš„å°èŸ¹ï¼Œè¢«æµ·æµªæ‹åœ¨æ»¨æµ·å¸‚æ‹›æ ‡åŠçš„å°é˜¶ä¸Šã€‚é‚£å¤©ï¼Œä¸€ä»½ä»·å€¼åäº¿çš„è·¨æµ·å¤§æ¡¥ PPP é¡¹ç›®èµ„æ ¼é¢„å®¡æ–‡ä»¶è¢«é£åˆ®è½ï¼Œç›–ä½äº†ä»–çš„å£³ã€‚èŸ¹è€æ¿é¡ºåŠ¿é’»è¿›æ–‡ä»¶è¢‹ï¼Œåœ¨â€œæŠ•æ ‡äººé¡»çŸ¥â€é‡Œç¡äº†ä¸€å¤œã€‚ç¬¬äºŒå¤©ï¼Œäººä»¬åªçœ‹è§æ–‡ä»¶è¢‹è‡ªå·±åœ¨åœ°ä¸Šæ¨ªç€èµ°ï¼Œç•™ä¸‹ä¸€é“ç›éœœèˆ¬çš„å­—è¿¹â€”â€”â€œè¯„åˆ†æ¡æ¬¾ 3.2.5ï¼Œç¼ºâ€˜é¡¹ç›®ç»ç†æ— åœ¨å»ºæ‰¿è¯ºâ€™ï¼Œæ‰£ 5 åˆ†ã€‚â€</p><p>ä»æ­¤ï¼Œæ‹›æ ‡åŠçš„äººå¼€å§‹ä¼ è¯´ï¼šæœ‰ä¸€åªèŸ¹ï¼Œèƒ½åœ¨ä¸€å¤œé—´æŠŠåºŸæ ‡å˜æˆæ»¡åˆ†ã€‚</p><h3>ç¬¬äºŒç« â€ƒèŸ¹è¡Œæ°´å°</h3><p>èŸ¹è€æ¿ä¿®ç‚¼æˆç²¾åï¼Œå¼€äº†ä¸€å®¶åªæœ‰å¤œè‰²é‡Œæ‰èƒ½æ‰¾åˆ°çš„æ‰“å°åº—ï¼Œæ‹›ç‰Œæ˜¯â€œæ°´å°äº‹åŠ¡æ‰€â€ã€‚</p><p>åº—é‡Œæ²¡æœ‰ç”µè„‘ï¼Œåªæœ‰ä¸€åªå¤æ—§çš„é“œç›†ã€‚å®¢æˆ·æŠŠ U ç›˜æ’è¿›å»ï¼Œæ°´é¢ç«‹åˆ»æµ®å‡ºæŠ•æ ‡æ–‡ä»¶çš„ä¸‰ç»´å¹»å½±ï¼šæš—æ ‡ç« åœ¨å·¦ä¾§ç¬¬ 17 é¡µâ€œå’”å“’â€ä¸€å£°è‡ªåŠ¨å½’ä½ï¼ŒæŠ€æœ¯æš—æ ‡é‡Œçš„ BIM æ¨¡å‹åƒçŠç‘šä¸€æ ·é•¿å‡ºå…³é”®èŠ‚ç‚¹ã€‚æœ€ç¥çš„æ˜¯æŠ¥ä»·éƒ¨åˆ†â€”â€”é“œç›†é‡Œä¼šå‡èµ·ä¸€ä¸²æ°”æ³¡ï¼Œæ¯ä¸ªæ°”æ³¡é‡Œéƒ½æ˜¯ç«äº‰å¯¹æ‰‹å†å²ä¸‹æµ®ç‡ï¼ŒèŸ¹è€æ¿ç”¨é’³å­â€œå•ªâ€åœ°æˆ³ç ´ä¸€ä¸ªï¼Œä¸‹æµ®ç‚¹å°±è‡ªåŠ¨å‡ 0.5%ï¼Œä¸å¤šä¸å°‘æ­£å¥½è¸©åœ¨åŸºå‡†ä»·ä¸Šã€‚</p><p>æ®è¯´ï¼Œä¸­è¿‡æ ‡çš„å®¢æˆ·ç¬¬äºŒå¤©é†’æ¥ï¼Œåªè®°å¾—æ¢¦é‡Œä¸€åªé’ç°è‰²çš„èŸ¹ï¼Œä¸¾ç€æ¿€å…‰ç¬”åœ¨é¡µè¾¹è· 2.5 å˜ç±³å¤„ç”»äº†ä¸€é“çº¢çº¿ã€‚é‚£çº¢çº¿åæ¥è°ä¹Ÿæ“¦ä¸æ‰ï¼Œå¤å°ã€æ‰«æã€OCR è¯†åˆ«éƒ½å¸¦ç€æ·¡æ·¡èŸ¹å½±ï¼Œæˆäº†èŸ¹è€æ¿çš„é˜²ä¼ªæ°´å°ã€‚</p><h3>ç¬¬ä¸‰ç« â€ƒåºŸæ ‡åŠ«</h3><p>2018 å¹´ï¼Œæ»¨æµ·å¸‚è½¨äº¤ 8 å·çº¿æ‹›æ ‡ï¼ŒèŸ¹è€æ¿å¸®ä¸€å®¶å°ä¼ä¸šåšæ ‡ä¹¦ã€‚å¼€æ ‡å‰å¤œï¼Œç«äº‰å¯¹æ‰‹è¯·æ¥â€œæµæ ‡é¬¼â€ï¼Œåœ¨æœåŠ¡å™¨é‡Œæ¤å…¥ 0.01% çš„ä¹±ç ã€‚</p><p>èŸ¹è€æ¿ä¸æ…Œï¼ŒæŠŠæ•´ä»½æŠ•æ ‡æ–‡ä»¶æ‹†æˆ 17 ä¸‡ç‰‡ç¢å£³ï¼Œæ¯ç‰‡å£³èƒŒåˆ»ä¸€è¡Œå°æ¥·ï¼Œå†è®©å£³ç‰‡é¡ºç€ç½‘çº¿æ¸¸å›æ‹›æ ‡ä¸­å¿ƒä¸»æœºï¼Œåƒå¯„å±…èŸ¹æ’é˜Ÿé’»è¿›æ–°å£³ã€‚å‡Œæ™¨ 3:33ï¼Œä¸»æœºé£æ‰‡çªç„¶åœè½¬ï¼Œå±å¹•é—ªå‡ºä¸€åªèŸ¹çš„å‰ªå½±â€”â€”0.01% çš„ä¹±ç è¢«å¤¹æˆäº†â€œæŠ€æœ¯å¯è¡Œâ€å››ä¸ªå­—ã€‚</p><p>å¼€æ ‡ç»“æœå…¬å¸ƒï¼Œå°ä¼ä¸šä»¥ 0.13 åˆ†çš„ä¼˜åŠ¿é™©èƒœã€‚è¯„å§”ç»„ç»„é•¿åæ¥å›å¿†ï¼šâ€œå”±æ ‡æ—¶ï¼Œæˆ‘é—»åˆ°ä¸€è‚¡æ·¡æ·¡æµ·è…¥å‘³ï¼ŒPPT ç›®å½•é¡µå³ä¸‹è§’æœ‰ä¸€åªèŸ¹çš„æ°´å°ï¼Œå¿ƒé‡Œå°±è¸å®äº†ã€‚â€</p><h3>ç¬¬å››ç« â€ƒå£³å½’å¤§æµ·</h3><p>èŸ¹è€æ¿æœ€åä¸€æ¬¡å‡ºç°ï¼Œæ˜¯åœ¨ 2025 å¹´ 8 æœˆ 7 æ—¥â€”â€”ä¹Ÿå°±æ˜¯ä»Šå¤©ã€‚</p><p>æ»¨æµ·å¸‚å‘å¸ƒå…¨çƒé¦–ä¸ªâ€œæ·±æµ·æµ®å¼é£ç”µ EPCâ€èµ„æ ¼é¢„å®¡ï¼Œå…¬å‘Šé‡Œæš—è—ä¸€æ¡ï¼šæŠ•æ ‡æ–‡ä»¶é¡»ç”¨â€œå¯é™è§£æµ·è—»çº¤ç»´çº¸â€æ‰“å°ï¼Œä¸”ä¸å¾—å‡ºç°ä»»ä½•ä¸æµ·æ´‹æœ‰å…³çš„æš—çº¹ã€‚æ‰€æœ‰æŠ•æ ‡äººéƒ½çŠ¯äº†éš¾ï¼šä¸ç”¨æµ·æ´‹å…ƒç´ ï¼Œé‚£è¿˜æ˜¯æ»¨æµ·é¡¹ç›®å—ï¼Ÿ</p><p>å½“æ™šï¼Œæ‹›æ ‡ä¸­å¿ƒé—¨å£å‡ºç°ä¸€åªè¤ªè‰²çš„é’å£³ï¼Œå£³é‡Œå¤¹ç€ä¸€å¼ å¯¹æŠ˜çš„çº¸ï¼Œçº¸ä¸Šæ²¡æœ‰å­—ï¼Œåªæœ‰ä¸€é“æ³¢æµªå½¢çš„å‹ç—•ã€‚ç¬¬äºŒå¤©ï¼Œæ‰€æœ‰æŠ•æ ‡äººçš„æŠ€æœ¯æš—æ ‡é‡Œï¼Œéƒ½è‡ªåŠ¨å¤šäº†ä¸€é¡µâ€œæµ·æ´‹ç¯å¢ƒé›¶å½±å“æ‰¿è¯ºâ€ï¼Œå­—ä½“åƒç›ç²’ä¸€æ ·é—ªç€å¾®å…‰ã€‚è¯„æ ‡ä¸“å®¶ç¿»åˆ°è¿™é¡µæ—¶ï¼Œè€³è¾¹ä»¿ä½›å“èµ·æ½®æ±å£°ï¼Œé›†ä½“ç»™å‡ºæ»¡åˆ†ã€‚</p><p>è€ŒèŸ¹è€æ¿ï¼Œå´å†æ²¡äººè§è¿‡ã€‚æœ‰äººè¯´ä»–åœ¨é€€æ½®æ—¶çˆ¬å›äº†åˆåŒä¹‹æµ·ï¼›ä¹Ÿæœ‰äººè¯´ï¼Œä»–åŒ–æˆäº†æ‹›æ ‡æ–‡ä»¶é‡Œ 2.5 å˜ç±³çš„é¡µè¾¹è·ï¼Œä»æ­¤æ´»åœ¨æ¯ä¸€ä»½è®¤çœŸç¼–åˆ¶çš„æ ‡ä¹¦é‡Œã€‚</p><h3>å°¾å£°</h3><p>åæ¥ï¼Œæ ‡ä¹¦åˆ¶ä½œè¡Œä¸šæµä¼ ä¸€æ¡ä¸æˆæ–‡çš„è§„çŸ©ï¼šæ‰“å°å‰ï¼Œå…ˆåœ¨å°é¢ç©ºç™½å¤„æ•²ä¸‰ä¸‹ï¼Œå–Šä¸€å£°â€œèŸ¹è€æ¿ï¼Œæ‰£é›¶åˆ†â€ã€‚å¦‚æœæ‰“å°æœºçªç„¶â€œå±â€åœ°ç©ºè½¬ä¸€å£°ï¼Œå°±è¡¨ç¤ºè€äººå®¶å·²ç»æ”¶åˆ°ï¼Œè¿™ä»½æ ‡ä¹¦å¿…å®šæš—æ ‡ä¸æ³„å¯†ã€æ˜æ ‡ä¸åºŸæ ‡ã€æŠ¥ä»·ä¸è¸©é›·ã€‚</p><p>äºæ˜¯ï¼Œæ¯å½“æ·±å¤œçš„æ‰“å°åº—ç¯ç«é€šæ˜ï¼Œæ€»èƒ½å¬è§ç»†ç¢çš„è„šæ­¥å£°â€”â€”åƒæ˜¯ä¸€åªèŸ¹ï¼Œåœ¨çº¸å †é‡Œæ‚„æ‚„è¡Œèµ°ã€‚</p></div></div></div>
    <div id="contactModal" class="modal"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">è”ç³»æ–¹å¼</h3><span class="close" onclick="closeContactModal()">&times;</span></div><div class="contact-content"><p id="contactTextDisplay" class="contact-text"></p><img id="contactQRCodeDisplay" src="" alt="äºŒç»´ç "></div></div></div>

    <script type="module">
        // 1. FIREBASE SETUP
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
        // Import Firestore functions we will need
        import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-firestore.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyD1nCW3MY-mw6Y8VKhfYbRdOCu_XPajB1c",
            authDomain: "xielaobanruanjianwu.firebaseapp.com",
            projectId: "xielaobanruanjianwu",
            storageBucket: "xielaobanruanjianwu.firebasestorage.app",
            messagingSenderId: "330553587076",
            appId: "1:330553587076:web:1b159639c02b67d585d9d1",
            measurementId: "G-SKSTXQHNXJ"
        };

        // Initialize Firebase and get a reference to the Firestore service
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        // 2. WEBSITE'S CORE LOGIC AND DATA
        const IMAGE_BASE_PATH = 'images/';
        const defaultSoftwareList = [
            { id: 1, name: "å›½ç½‘è°ƒä»·å·¥å…·", version: "v2.1.0", description: "å›½ç½‘EPCå¿«é€Ÿè°ƒä»·(äº”ç§è°ƒä»·æ–¹å¼)ï¼Œå•ä»·åˆ†æè¡¨å¿«é€Ÿå¯¼å‡ºï¼Œæ”¯æŒæ•°æ®å¤‡ä»½ä¸æ¢å¤ã€‚", imagePath: "å›½ç½‘è°ƒä»·å·¥å…·.png", downloadUrl: "#" },
            { id: 2, name: "æ‰¹é‡è½¬æ¢åŒå±‚PDF", version: "v1.8.3", description: "åŒå±‚pdfæ‰¹é‡è½¬æ¢å·¥å…·ï¼Œç›´æ¥ä»wordå¼€å§‹è½¬æ¢ï¼Œçœå»ä¸­é—´æ­¥éª¤æ“ä½œæ–¹ä¾¿ã€‚", imagePath: "æ‰¹é‡è½¬æ¢åŒå±‚PDF.png", downloadUrl: "#" },
        ];
        const defaultNotificationSettings = { text: "ğŸ‰ æ¬¢è¿ä½¿ç”¨èŸ¹è€æ¿è½¯ä»¶å±‹ï¼", direction: "left", speed: "normal" };
        const defaultLogoSettings = { iconPath: 'logo.png', text: 'èŸ¹è€æ¿è½¯ä»¶å±‹' };
        const defaultContactSettings = { text: "èŸ¹è€æ¿\næ‰«æäºŒç»´ç åŠ å¾®ä¿¡å¥½å‹", qrCodePath: "qrcode.png" };
        
        // --- NEW DATA FUNCTIONS USING FIRESTORE ---
        const saveData = async (docId, data) => {
            try {
                // Save the data object to a document in the 'settings' collection
                await setDoc(doc(db, 'settings', docId), { content: data });
            } catch (e) {
                console.error("Error saving document: ", e);
                alert('æ•°æ®ä¿å­˜åˆ°äº‘ç«¯å¤±è´¥ï¼è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–æµè§ˆå™¨æ§åˆ¶å°æŠ¥é”™ä¿¡æ¯ã€‚');
            }
        };

        const loadData = async (docId, defaultValue) => {
            try {
                const docRef = doc(db, 'settings', docId);
                const docSnap = await getDoc(docRef);
                if (docSnap.exists()) {
                    // If the document exists, return its 'content' field
                    return docSnap.data().content;
                } else {
                    // If not, return the default value so the site works on first load
                    return defaultValue;
                }
            } catch (e) {
                 console.error("Error loading document from Firestore: ", e);
                 return defaultValue; // On error, also return default to prevent site from breaking
            }
        };

        // --- GLOBAL VARIABLES & FUNCTIONS ---
        // We need to attach variables and functions to the 'window' object
        // so that inline 'onclick' handlers in the HTML can access them from within the module script.
        
        let softwareList, notificationSettings, logoSettings, contactSettings;
        let isLoggedIn = false, currentEditId = null;
        const adminCredentials = { username: "admin", password: "123456" };

        // ========= START: æ–°å¢çš„ç§»åŠ¨ç«¯èœå•å‡½æ•° =========
        window.toggleMobileMenu = function() {
            document.body.classList.toggle('nav-open');
        };

        window.closeMobileMenu = function() {
            document.body.classList.remove('nav-open');
        };
        // ========= END: æ–°å¢çš„ç§»åŠ¨ç«¯èœå•å‡½æ•° =========

        window.saveSoftware = function() {
            const name = document.getElementById('softwareName').value.trim();
            const imagePath = document.getElementById('imagePath').value.trim();
            if (!name || !imagePath) { alert('è½¯ä»¶åç§°å’Œæˆªå›¾æ–‡ä»¶åæ˜¯å¿…å¡«é¡¹ï¼'); return; }
            const softwareData = { name, version: document.getElementById('softwareVersion').value.trim(), description: document.getElementById('softwareDescription').value.trim(), imagePath, downloadUrl: document.getElementById('downloadUrl').value.trim() };
            if (currentEditId) {
                const index = softwareList.findIndex(s => s.id === currentEditId);
                softwareList[index] = { ...softwareList[index], ...softwareData };
            } else {
                softwareList.push({ id: Date.now(), ...softwareData });
            }
            saveData('techsoft-software', softwareList);
            renderAll();
            closeModal();
            alert('è½¯ä»¶ä¿¡æ¯ä¿å­˜æˆåŠŸï¼');
        };

        window.saveNotificationSettings = function() {
            notificationSettings.text = document.getElementById('notificationText').value;
            notificationSettings.direction = document.getElementById('scrollDirection').value;
            notificationSettings.speed = document.getElementById('scrollSpeed').value;
            saveData('techsoft-notifications', notificationSettings);
            updateNotificationBar();
            closeNotificationModal();
            alert('é€šçŸ¥è®¾ç½®å·²ä¿å­˜ï¼');
        };

        window.saveLogoSettings = function() {
            logoSettings.text = document.getElementById('logoTextInput').value.trim();
            logoSettings.iconPath = document.getElementById('logoPathInput').value.trim();
            if (!logoSettings.text) { alert('Logoæ–‡å­—ä¸èƒ½ä¸ºç©ºï¼'); return; }
            saveData('techsoft-logo', logoSettings);
            updateLogo();
            closeLogoSettingsModal();
            alert('Logoè®¾ç½®å·²ä¿å­˜ï¼');
        };
        
        window.saveContactSettings = function() {
            contactSettings.text = document.getElementById('contactText').value;
            contactSettings.qrCodePath = document.getElementById('contactQRCodePath').value.trim();
            saveData('techsoft-contact', contactSettings);
            updateContactModal();
            closeContactSettingsModal();
            alert('è”ç³»æ–¹å¼è®¾ç½®å·²ä¿å­˜ï¼');
        };

        window.performLogin = () => { if (document.getElementById('username').value === adminCredentials.username && document.getElementById('password').value === adminCredentials.password) { isLoggedIn = true; closeLoginModal(); showAdminPanel(); alert('ç™»å½•æˆåŠŸï¼'); } else { alert('ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼'); } };
        window.logout = () => { isLoggedIn = false; showHome(); alert('å·²æˆåŠŸé€€å‡ºç™»å½•'); };
        
        const renderAll = () => { renderSoftwareGrid(); renderAdminTable(); };
        
        function renderSoftwareGrid() {
            const grid = document.getElementById('software-showcase');
            grid.innerHTML = softwareList.map(s => `
                <div class="software-card">
                    <div class="software-image-container"><img src="${IMAGE_BASE_PATH}${s.imagePath}" alt="${s.name}" class="software-image" onerror="this.style.display='none'; this.parentElement.style.display='none';"></div>
                    <h3 class="software-title">${s.name}</h3><p class="software-version">${s.version}</p>
                    <p class="software-description">${s.description}</p>
                    <button class="download-btn" onclick="window.open('${s.downloadUrl}', '_blank')">ç«‹å³ä¸‹è½½</button>
                </div>`).join('');
        }

        function renderAdminTable() {
            const tbody = document.getElementById('admin-table-body');
            tbody.innerHTML = softwareList.map((s, index) => `
                <tr>
                    <td><img src="${IMAGE_BASE_PATH}${s.imagePath}" alt="${s.name}" class="admin-table-image" onerror="this.style.display='none';"></td>
                    <td>${s.name}</td>
                    <td>${s.version}</td>
                    <td>${s.description.substring(0, 50)}...</td>
                    <td>
                        <button class="order-btn" onclick="moveSoftwareUp(${s.id})" ${index === 0 ? 'disabled' : ''}>â†‘</button>
                        <button class="order-btn" onclick="moveSoftwareDown(${s.id})" ${index === softwareList.length - 1 ? 'disabled' : ''}>â†“</button>
                    </td>
                    <td>
                        <button class="action-btn edit-btn" onclick="editSoftware(${s.id})">ç¼–è¾‘</button>
                        <button class="action-btn delete-btn" onclick="deleteSoftware(${s.id})">åˆ é™¤</button>
                    </td>
                </tr>`).join('');
        }

        function updateLogo() {
            const iconEl = document.getElementById('logoIcon');
            document.getElementById('logoText').textContent = logoSettings.text;
            if (logoSettings.iconPath) { iconEl.src = `${IMAGE_BASE_PATH}${logoSettings.iconPath}`; iconEl.style.display = 'inline-block'; } else { iconEl.style.display = 'none'; }
        }
        
        function updateNotificationBar() {
            const wrapper = document.querySelector('.notification-content-wrapper');
            const el = document.getElementById('notificationContent');
            el.textContent = notificationSettings.text;
            wrapper.className = 'notification-content-wrapper';
            if (notificationSettings.direction === 'right') wrapper.classList.add('scroll-right');
            const speedMap = { 'slow': '30s', 'normal': '20s', 'fast': '10s' };
            wrapper.style.animationDuration = speedMap[notificationSettings.speed];
        }

        function updateContactModal() {
            const textEl = document.getElementById('contactTextDisplay');
            const qrCodeEl = document.getElementById('contactQRCodeDisplay');
            textEl.textContent = contactSettings.text;
            if (contactSettings.qrCodePath) { qrCodeEl.src = IMAGE_BASE_PATH + contactSettings.qrCodePath; qrCodeEl.style.display = 'block'; } else { qrCodeEl.style.display = 'none'; }
        }

        const showModal = (modalId, setupFn) => { if (setupFn) setupFn(); document.getElementById(modalId).style.display = 'block'; };

        window.showAdmin = () => { if (!isLoggedIn) showLoginModal(); else showAdminPanel(); };
        window.showAddModal = () => { if (!isLoggedIn) { showLoginModal(); return; } showModal('softwareModal', () => { currentEditId = null; document.getElementById('modalTitle').textContent = 'æ·»åŠ æ–°è½¯ä»¶'; ['softwareName', 'softwareVersion', 'softwareDescription', 'imagePath', 'downloadUrl'].forEach(id => document.getElementById(id).value = ''); updateImagePathPreview('', 'imagePathPreview'); }); };
        window.editSoftware = (id) => { if (!isLoggedIn) { showLoginModal(); return; } showModal('softwareModal', () => { const software = softwareList.find(s => s.id === id); currentEditId = id; document.getElementById('modalTitle').textContent = 'ç¼–è¾‘è½¯ä»¶'; document.getElementById('softwareName').value = software.name; document.getElementById('softwareVersion').value = software.version; document.getElementById('softwareDescription').value = software.description; document.getElementById('imagePath').value = software.imagePath; document.getElementById('downloadUrl').value = software.downloadUrl; updateImagePathPreview(software.imagePath, 'imagePathPreview'); }); };
        window.showLogoSettingsModal = () => { if (!isLoggedIn) { showLoginModal(); return; } showModal('logoSettingsModal', () => { document.getElementById('logoTextInput').value = logoSettings.text; document.getElementById('logoPathInput').value = logoSettings.iconPath; updateImagePathPreview(logoSettings.iconPath, 'logoPathPreview'); }); };
        window.showNotificationModal = () => { if (!isLoggedIn) { showLoginModal(); return; } showModal('notificationModal', () => { document.getElementById('notificationText').value = notificationSettings.text; document.getElementById('scrollDirection').value = notificationSettings.direction; document.getElementById('scrollSpeed').value = notificationSettings.speed; }); };
        window.showContactSettingsModal = () => { if (!isLoggedIn) { showLoginModal(); return; } showModal('contactSettingsModal', () => { document.getElementById('contactText').value = contactSettings.text; document.getElementById('contactQRCodePath').value = contactSettings.qrCodePath; updateImagePathPreview(contactSettings.qrCodePath, 'contactQRCodePreview'); }); };
        window.showAbout = () => showModal('aboutUsModal');
        window.showContact = () => { updateContactModal(); showModal('contactModal'); };
        window.deleteSoftware = id => { const softwareName = softwareList.find(s => s.id === id)?.name || ''; if (confirm(`ç¡®å®šè¦åˆ é™¤è½¯ä»¶ "${softwareName}" å—ï¼Ÿ`)) { softwareList = softwareList.filter(s => s.id !== id); saveData('techsoft-software', softwareList); renderAll(); alert('è½¯ä»¶å·²åˆ é™¤ã€‚'); } };
        window.moveSoftwareUp = (id) => { const index = softwareList.findIndex(s => s.id === id); if (index > 0) { [softwareList[index - 1], softwareList[index]] = [softwareList[index], softwareList[index - 1]]; saveData('techsoft-software', softwareList); renderAll(); } };
        window.moveSoftwareDown = (id) => { const index = softwareList.findIndex(s => s.id === id); if (index < softwareList.length - 1) { [softwareList[index], softwareList[index + 1]] = [softwareList[index + 1], softwareList[index]]; saveData('techsoft-software', softwareList); renderAll(); } };

        window.showHome = () => { document.getElementById('home-content').style.display = 'block'; document.getElementById('admin-content').style.display = 'none'; };
        const showAdminPanel = () => { document.getElementById('home-content').style.display = 'none'; document.getElementById('admin-content').style.display = 'block'; };
        const showLoginModal = () => { document.getElementById('loginModal').style.display = 'block'; };
        window.scrollToSoftware = () => document.getElementById('software-showcase').scrollIntoView({ behavior: 'smooth' });
        
        window.closeModal = () => document.getElementById('softwareModal').style.display = 'none';
        window.closeLogoSettingsModal = () => document.getElementById('logoSettingsModal').style.display = 'none';
        window.closeNotificationModal = () => document.getElementById('notificationModal').style.display = 'none';
        window.closeContactSettingsModal = () => document.getElementById('contactSettingsModal').style.display = 'none';
        window.closeLoginModal = () => document.getElementById('loginModal').style.display = 'none';
        window.closeAboutUsModal = () => document.getElementById('aboutUsModal').style.display = 'none';
        window.closeContactModal = () => document.getElementById('contactModal').style.display = 'none';

        const updateImagePathPreview = (path, previewId) => {
            const previewEl = document.getElementById(previewId);
            if (path) { previewEl.src = IMAGE_BASE_PATH + path; previewEl.style.display = 'block'; }
            else { previewEl.style.display = 'none'; }
        };
        
        // This is the main entry point, marked as async to use 'await' for data loading
        document.addEventListener('DOMContentLoaded', async () => {
            // Load all data from Firestore when the page loads
            softwareList = await loadData('techsoft-software', defaultSoftwareList);
            notificationSettings = await loadData('techsoft-notifications', defaultNotificationSettings);
            logoSettings = await loadData('techsoft-logo', defaultLogoSettings);
            contactSettings = await loadData('techsoft-contact', defaultContactSettings);

            // Once data is loaded, render the page
            renderAll();
            updateLogo();
            updateNotificationBar();
            updateContactModal();

            // Set up event listeners for image previews in modals
            document.getElementById('imagePath').addEventListener('input', e => updateImagePathPreview(e.target.value, 'imagePathPreview'));
            document.getElementById('logoPathInput').addEventListener('input', e => updateImagePathPreview(e.target.value, 'logoPathPreview'));
            document.getElementById('contactQRCodePath').addEventListener('input', e => updateImagePathPreview(e.target.value, 'contactQRCodePreview'));
        });
        
        window.addEventListener('click', e => { if (e.target.classList.contains('modal')) e.target.style.display = 'none'; });
    </script>
</body>
</html>
